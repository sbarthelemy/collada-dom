 Copyright 2006 Sony Computer Entertainment Inc.

 Licensed under the SCEA Shared Source License, Version 1.0 (the "License"); you may not use this 
 file except in compliance with the License. You may obtain a copy of the License at:
 http://research.scea.com/scea_shared_source_license.html

 Unless required by applicable law or agreed to in writing, software distributed under the License 
 is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or 
 implied. See the License for the specific language governing permissions and limitations under the 
 License.
======================================================================
COLLADA 1.4.1 DOM 1.3.0

Date: March 30, 2007
Author: Andrew C. Lorino, Mark C. Barnes
======================================================================
======================================================================

This DOM provides import and export capabilities to tools that process
COLLADA v1.4.1 or COLLADA v1.3.1 documents.


======================================================================
Known bugs
======================================================================
* [Bug]

  SourceForge Open Issues
  
  1609207   daeURI::makeRelativeTo inconsistent on Windows Platforms
  1561338   New daeTArray single element constructor should be explicit
  1437830 	syntax error in sample DOM code in programming guide

  Mantis Open Issues (major and above)

  0000461	DOM - OM   major	daeElement::clone does not resolve URI's
  0000543	DOM - OM   major	given a const pointer to a dom object it might not be possible to read it


======================================================================
Restriction 
======================================================================
* [Guideline] 
  Issue reporting is done using the Sourceforge bug tracking database hosted at
  http://sourceforge.net/projects/collada-dom .

* [Guideline]
  Refer to the COLLADA_DOM-Programming_Guide.pdf user documention for further information.
  Refer to the COLLADA_DOM.chm reference documentation for online help.

* [Guideline]
  To build for Windows you will need to set an environment variable 
  COLLADA_EXTERNAL_LIBS_LOCATION equal to the path which contains the libxml2 files required.
  The directory structure needs to be 
	COLLADA_EXTERNAL_LIBS_LOCATION\libxml2
	COLLADA_EXTERNAL_LIBS_LOCATION\libxml2\win32
	COLLADA_EXTERNAL_LIBS_LOCATION\libxml2\win32\include - This contains the header files for libxml2 as 
		well as iconv and zlib
	COLLADA_EXTERNAL_LIBS_LOCATION\libxml2\win32\lib - This contains the lib files for libxml2 as well as
		iconv and zlib
  The other COLLADA DOM projects, COLLADA_RT, COLLADA_FX, COLLADA_REFINERY, require additional dependencies
  to be placed in the COLLADA_EXTERNAL_LIBS_LOCATION directoy.
  The install package will install these dependencies and set this environment variable for you. If you
  are building from the .zip source archive or from a SVN checkout you will need to set this up yourself.
  Prebuilt win32 binaries for libxml2, iconv, and zlib are available for download at 
  http://www.zlatkovic.com/libxml.en.html 

* [Guideline]
  The COLLADA DOM, as of release 1.2.0, is now available as a Windows DLL. The DLL naming conventions is
  libcollada($COLLADA_VERSION)dom($DOM_VERSION).dll. For this release the library is named
  libcollada141dom13.dll and the import library to use when building client applications is 
  libcollada141dom13.lib and can be found in the COLLADA_DOM/lib directory. Debug versions have _d appended
  to the end of the filename.

* [Guideline]
  The COLLADA_DOM, as of release 1.2.0, has changed the build output location of win32 static libraries.
  The DOM now contains project files for both MSVS2003 and MSVS2005. The output for MSVC2003 is lib/vc7
  and for MSVS2005 is lib/vc8. Be careful if updating from previous DOM versions. If you don't update your
  project files to use the new location you may inadvertently continue linking against old versions of the 
  DOM libraries which will cause errors.

* [Guideline]
  The COLLADA DOM DLL dynamically links against the iconv library. Be sure to have the iconv.dll available
  for client applications which may need libxml2 international character set support. The reason for
  this is the viral-like nature of the GPL and LGPL licenses which requiires programs staticly linked
  against a GPL or LGPL library to also be licesed under the GPL or LGPL. 

* [Guideline]
  Be careful when static linking COLLADA DOM applications. The iconv library, that libxml2 depends on, is 
  licensed under the LGPL. Any programs staticly linked with this software must also be released as LGPL.
  To get around this you can either dynamic link iconv or build libxml2 without iconv support. The COLLADA DOM
  install package installs the default configuration of the libxml2 library which requires iconv.

* [Guideline]
  A new helper function template <typename T> inline T *daeSafeCast( daeElement *element ) has been added to the
  COLLADA DOM in file daeElement.h. It is the recomended way to cast from a daeElement* or daeElementRef to a
  class derived from daeElement. It uses the same syntax as the C++ *_cast functions.

* [Guideline]
  You can now toggle automatic loading of external documents by calling 
  daeURIResolver::setAutoLoadExternalReferences(). 
  You can now get a list of external references contained within a document by calling 
  document->getReferencedDocuments(). With automatic loading turned off and the list of 
  external documents you reference, the client program has a lot more control over what 
  gets loaded and when.

* [Guideline]
  Added a new class, daeSIDResolver, that will resolve SID targets. This class does not 
  resolve elements automatically like the daeURI and daeIDRef resolver classes. If you 
  want to use this functionality create a daeSIDResolver passing in a pointer to the element
  that contains the target string, the target string, and optionally a platform string. A
  NULL platform string will cause the SID resolver to search through the COMMON techniques.

* [Guideline]
  A common problem will be that domListOfFloats is actually a daeDoubleArray since COLLADA 
  defines a float as xs:Double. Be carefull when accessing or copying memory directly.

* [Guideline]
  The rule for enum names is ENUMTYPE_VALUE to avoid collisions with 
  #defines and enums defined in the schema with duplicate values.
  
* [Limitation]
  You cannot build and use the 1.3.1 and 1.4.1 versions of the DOM simultaneously.
  
* [Guideline]
  A new function "getDomVersion" returns a text string (ie 1.3.1) that indicates the version 
  of the COLLADA schema that was used to build the DOM.  Applications that depend on a specific
  schema version should check this.

* [Guideline]
  All load, save, query and other DOM calls that expect a document URI or a collection
  name now use URIs.  Remember to change backslashes to forward slashes and place
  file:/// or / in front of absolute URIs.

======================================================================
Contributions
======================================================================
Thanks to Nicholas Yue for contributing the xcode project files.
Special Thanks to SThomas (sthomas_agi on sourceforge) for contributing patches to many files to 
fix up most of the memory leak issues and a few other issues.

======================================================================
Changes (for developer)
======================================================================
* Fixed in COLLADA 1.4.1 DOM 1.3.0
- 1675177	URIs without filepath crash DOM
- 1644658	<mipmap_generate> crashes DOM
- 1643680	<color_mask>'s bool4 values are not saved
- 1639097	Some instance_* element's save without some attributes
- 1634513	Need domAny::getElementType
- 1631700	multiple <init_from> crashes DOM
- 1623755	Crash while loading an image init_from
- 1618489	Missing DLLSPEC in daeMetaElement.h
- 1616083	VC7 dae.vcproj problems
- 1614431	COLLADA_DOM: daeAtomicType.cpp: error in format string in
- 1609709	daeTarray get3at and get4at functions are incorrect

* Fixed in COLLADA 1.4.1 DOM 1.2.0
- 1593134 	daeElement::clone doesn't work perfectly
- 1591999  	vc7 project files debug files wrong place
- 1590438 	daeLIBXMLPlugin::startParse crashes if xmlns missing
- 1590414 	domCOLLADA object not properly intialised
- 1584357 	uninitializeKnownTypes() does not check _TypesInitialized
- 1583559 	Dangling Meta pointers
- 1573541 	Calling DAE::cleanup() without running any DAE init crashes
- 1561318 	daeIDRef needs copy constructor
- 1541271 	Copy constructor for domInputLocalOffset
- 1530106 	INF and -INF is not handled for constraint limits
- 1528050 	Memory leaks/errors
- 1522731 	DOM creates invalid COLLADA documents
- 1522729 	DOM doesn't handle "1" as true when loading a document
- 1522727 	setValue() functions do not take ownership of strings
- 1522726 	DOM crashes when setting string attributes to NULL
- 1520582 	DOM 1.4.1 buffer overflow
- 1520281 	Database corruption
- 1516104 	Circular references with integration objects
- 1507993  	dae dependency on libxml.h?
- 1498086 	Compile error with GCC 4.1 on daeURI.h
- 1472586 	daeURI Copy Constructor
- 1467892 	Visual Studio PDB file names are all the same
- 1466019 	Memory Leak issue
- 1449595 	Permanent memory leaks
- 1444313 	Bad handling of "#" URIs
- 1431586 	Incorrect file paths

* Fixed in COLLADA 1.4.1 DOM 1.1.0
- 1508961  	Can't write out set="0"
- 1503087 	crash in COLLADA_RT_VIEWER
- 1499558 	daeURI and Windows paths
- 1492973 	wrong name in domInputLocal
- 1491045 	Unable to get SID attribute.
- 1490426 	daeTArray<T>::setCount(0) infinite loop
- 1477052 	No way to tell if animation_clip "end" attribute is present.
- 1442300  	placeElement should insert items in correct order

* Fixed in COLLADA 1.4 DOM Patch 3
- 1456261  	Build problems on Linux
- 1449295 	external-libs misleading readme_e.txt
- 1444752 	daeURI::getOriginalURI() not const correct
- 1444137 	stdErrPlugin builds as single-threaded
- 1440690 	The DOM is too slow
- 1431586 	Incorrect file paths

* Fixed in COLLADA 1.4 DOM Patch 2
- none

* Fixed in COLLADA 1.4 DOM Patch 1

  SourceForge Resolved Issues

- 1427511 	Capitalized file suffix causes URI resolution failure
- 1426237 	Spaces in URI cause truncation
- 1425344 	Errors in cube_effects.dae
- 1425161 	Missing shaders
- 1424745 	project home page not set
- 1422955 	Samples may not build as-is
- 1415847 	deindexer sample produces incorrect output
- 1415666 	getElementCount() returns wrong count

Mantis Resolved Issues

- 0000595: [DOM - Documentation] DOM should check document namespaces and report errors if trying to load different namespaces.
- 0000589: [DOM - General] Error and warning messages need to be routed through a plugin instead of stdout/err
- 0000624: [DOM - General] better error reporting mechanism
- 0000508: [DOM - General] Deprecated methods being removed, existing code needs to be checked and updated
- 0000495: [DOM - Importer] daeLIBXMLPlugin error handling needs to be improved
- 0000529: [DOM - General] Linux compilation
- 0000682: [DOM - General] Version number ignored

* Fixed in COLLADA DOM Public Release

  Mantis Resolved Issues 

- 0000211: [DOM - Importer] Import objects not destructed.
- 0000307: [DOM - Object Model] Extension for arbitrary XML within API
- 0000596: [DOM - Importer] IO Plugin "load" method needs to be reentrant but isn't
- 0000611: [DOM - Interface] methods/attributes in daeURI and daeIDRef are not consistent
- 0000619: [DOM - General] daeArray has no copy constructor
- 0000628: [DOM - Exporter] init_from element outputs garbage
- 0000636: [DOM - Documentation] Add domFx_include_profile
- 0000645: [DOM - General] No accessor for "host" (really authority)
- 0000647: [DOM - Object Model] Request DOM Regeneration for FX Composer team
- 0000653: [DOM - Importer] Unsigned less than zero check in daeEnumType::stringToMemory
- 0000654: [DOM - General] Warning level 4 in Projects
- 0000656: [DOM - Documentation] 1.4 docs refer to 1.3 elements
- 0000660: [DOM - Exporter] database corruption
- 0000662: [DOM - Object Model] Impossible to unload files from the DOM
- 0000667: [DOM - General] Crash loading bad uri
- 0000668: [DOM - General] top meta is created incorrectly
- 0000669: [DOM - General] Resolver cannot resolve run time URIs
- 0000670: [DOM - Exporter] incorrect xmlns uri output
- 0000687: [DOM - General] simple scene crashes the DOM
- 0000690: [DOM - Documentation] domBind_material::domTechnique::domMaterial::domBind does not have param children
- 0000692: [DOM - General] Cannot add render states to a pass
- 0000694: [DOM - Object Model] need more access to domAny data
- 0000695: [DOM - General] daeURI::placeElement does not set documentURI


* Fixed in Beta10 Release

  Mantis Resolved Issues 

- 0000462: [DOM - General] daeMemorySystem::malloc should not be clearing memory
- 0000486: [DOM - General] daeURI::resolveURI does nothing if called on a URI that has been successfully resolved before.
- 0000491: [DOM - Generator] Database searching functions use "collection name" as a key, they should use the collection URI
- 0000489: [DOM - General] insertCollection does not set a usable document URI
- 0000519: [DOM - General] daeURIResolver::resolveElement is incorrectly implemented in all the plugins
- 0000311: [DOM - General] quibbles with daeURI
- 0000494: [DOM - General] daeLIBXMLPlugin and some related changes need testing under Linux
- 0000478: [DOM - Exporter] toCollada calling is not automated
- 0000612: [DOM - Documentation] daeElement::removeFromParent not all paths return a value
- 0000607: [DOM - Documentation] samplers are not loaded
- 0000545: [DOM - Importer] DOM should handle "inf" and "Nan"
- 0000522: [DOM - General] daeArray, some members use size_t, some daeInt, they should be made consistant. 
- 0000493: [DOM - Exporter] The current document save implementation does not allow the IO plugin to control how/where files are written.
- 0000549: [DOM - General] dae and the plugins have dependencies on the schema version
- 0000530: [DOM - General] Compilation error in daeLIBXMLPlugin
- 0000534: [DOM - General] LibXML IO plugin doesn't check an error return from a method it calls.
- 0000537: [DOM - General] Absolute URIs (document names or bases) are not normalized
- 0000533: [DOM - Documentation] Application base URI was being set incorrectly on linux and interpreted incorrectly on windows
- 0000526: [DOM - General] Drive letters in Beta09
- 0000442: [DOM - General] We need a way to determine the version of the COLLADA schema the DOM was built for
- 0000200: [DOM - Importer] getDom() does not work with separators in the filename
- 0000505: [DOM - General] IO plugins do not support URIs for the "save" operation
- 0000468: [DOM - Generator] CodeGenerator doesn't properly handle inline definitions of simpletypes.
- 0000474: [DOM - Documentation] undocumented code in COLLADA_DOM base classes.
- 0000450: [DOM - Documentation] Reference manual errata list from Japanese translation
- 0000515: [DOM - General] daeElement::clone is a memory leak (reference counting)
- 0000513: [DOM - General] Copyright tags missing on some files in Beta 9 checkout.
- 0000504: [DOM - Integration] daeIntegrationObject TO/FROM methods should be protected.
- 0000507: [DOM - Generator] dom classes need to be regenerated to use daeURI accessors


* Fixed in Beta09 Release

  Mantis Resolved Issues 

- 0000149: [DOM - Object Model] Desk check feedback, various implementation issues
- 0000165: [DOM - Object Model] Desk check: strlen and strcmp applied to user-generated data.
- 0000204: [DOM - Object Model] Signed array counts
- 0000206: [DOM - General] daeArray get methods are not const
- 0000210: [DOM - Object Model] Autogenerate constructors and destructors?
- 0000238: [DOM - Object Model] Wrong sub-element ordering when writing out COLLADA file
- 0000245: [DOM - Interface] Create constants for "reserved words" in the spec
- 0000281: [DOM - Object Model] No copy operators or deep copy/clone functions are provided
- 0000297: [DOM - Object Model] getURI returns bad URI if a relative file name is specified
- 0000308: [DOM - Object Model] daeElement::createElement() is a memory leak
- 0000398: [DOM - Object Model] Remove _contents from DOM objects that don't need it
- 0000402: [DOM - Importer] Whitespace before > in a start tag causes parser to fail
- 0000403: [DOM - Importer] Whitespace before /> in a start tag causes parser to fail
- 0000411: [DOM - Object Model] daeDatabase::getAssetCount is missing documented functionality
- 0000414: [DOM - Object Model] Various problems with maintenance of "collection" and "parent-child" links
- 0000415: [DOM - Object Model] daeElement::placeElement does not properly maintain parent/child links
- 0000416: [DOM - Object Model] daeElement::placeElement does not properly maintain the collection pointers
- 0000418: [DOM - Object Model] daeDatabase::insertCollection should require a domCOLLADA
- 0000431: [DOM - Object Model] daeElement::createElement is not useful and should be depricated
- 0000440: [DOM - Object Model] File URI is not created properly in daeXMLPlugin::read, results in bad baseURI and other problems
- 0000442: [DOM - General] We need a way to determine the version of the COLLADA schema the DOM was built for
- 0000443: [DOM - Object Model] There are multiple holders for baseURI and none are set correctly.
- 0000444: [DOM - Object Model] daeElement::placeElement allows placement of invalid elements
- 0000446: [DOM - Object Model] daeURI::validate does not resolve relative URIs properly
- 0000447: [DOM - Object Model] daeURI::resolveURI erases the element it was trying to resolve
- 0000448: [DOM - Object Model] daeURI::resolveURI does not properly resolve cross-document references
- 0000449: [DOM - Object Model] Place elements always appends elements to _contents
- 0000451: [DOM - General]	Case sensitive file extensions...
- 0000456: [DOM - Object Model] Can not build dom lib under linux/mac osx
- 0000457: [DOM - Object Model] dom Makefile missing a cpp in the list of src files
- 0000465: [DOM - General] daeXMLPlugin::getProgress doesn't error check the input pointers properly
- 0000470: [DOM - General] Sample viewer/exporter etc are not in the build project anymore
- 0000475: [DOM - Generator] Generator doesn't generate all the documentation that is needed
- 0000476: [DOM - General] inconsistent include paths
- 0000479: [DOM - Exporter] daeStringRefType::memoryToString has a possible buffer overrun
- 0000480: [DOM - General] daeURI::resolveURI does not set the URI state to indicate a successful resolution
- 0000481: [DOM - General] Linking with libxml2 causes linker warnings
- 0000482: [DOM - General] daeURI "container" member is cleared whenever a URI value is changed
- 0000484: [DOM - General] daeURI::container member is not set for user-created daeURIs
- 0000485: [DOM - General] The copy constructor and copyFrom methods in daeURI do not copy "element"
- 0000498: [DOM - General] DOM classses need public accessor methods and private data members. This will break all client code.

* Fixed in Beta08 Release

  Mantis Resolved Issues  

- 0000218: [DOM - Doc] Need better explanation of C runtime library settings 	
- 0000266: [DOM - DOM] createAndPlace has no matching deletion function that keeps refcounts up-to-date 	
- 0000288: [DOM - DOM] xml parsing: whitespace causes program failure, various errors 	
- 0000300: [DOM - DOM] Nested class definitions in generated code are not indented properly 	
- 0000384: [DOM - Exp] "idx" attributes with a value of "0" are not exported 	
- 0000391: [DOM - Gen] xmlns parameter in header is lost on import->export 	
- 0000392: [DOM - Gen] Attributes that are "required" by the schema don't export if their value is zero or blank 	
- 0000394: [DOM - Imp] Importer can create "negative zero" values 	
- 0000404: [DOM - Imp] Whitespace in a tag's attribute="value" string can cause the parser to skip the attribute 	
- 0000407: [DOM - Doc] Error in description of daeDatabase:: insertAsset 	
- 0000408: [DOM - Doc] Clarification of type parameter for getAsset and getAssetCount 	
- 0000410: [DOM - Doc] daeCollection missing members 	
- 0000417: [DOM - Doc] daeDatabase::insertCollection only supports creation, not appending 	


* Fixed in Beta07 Release

  Mantis Resolved Issues  

- 0000118: [DOM - DOM] fromCOLLADA() calling
- 0000185: [DOM - DOM] Polygons with holes
- 0000215: [DOM - Documentation] Incorrect type "daeTrackedElement" in sample code
- 0000222: [DOM - Integration] daeIntegrationObject::getElement() and daeIntegrationObject::setElement() are identical.
- 0000225: [DOM - DOM] daeElement::createElement() returns corrupt object
- 0000285: [DOM - Documentation] Release notes has incorrect version number (Beta06)
- 0000301: [DOM - Documentation] The compiled help file is out-of-date and needs to be regenerated 
- 0000302: [DOM - Integration] Conversion order dependencies
- 0000303: [DOM - DOM] daeAtomicType.cpp has wrong scanf/printf type strings for short type
- 0000309: [DOM - DOM] daeIDRefResolver::~daeIDRefResolver() needs to be virtual
- 0000363: [DOM - DOM] daeMetaElement.cpp bugs in function errorParseUntilClose()


* Fixed in Beta06 Release

  Mantis Resolved Issues  

- 0000079: [DOM - DOM] sscanf safety
- 0000107: [DOM - DOM] List of tokens array defined as float array
- 0000142: [DOM - Importer] Finding a scene root
- 0000164: [DOM - DOM] Desk check: unguarded access to null ptr
- 0000166: [DOM - DOM] Desk check: possibly pass memset a negative value
- 0000182: [DOM - General] DAE object not deleted correctly
- 0000187: [DOM - DOM] XML String type doesnt properly obey XML rules
- 0000253: [DOM - General] Several dae classes have virtual functions but non-virtual destructors


* Fixed in Beta05 Release

  Mantis Resolved Issues  

- 0000120: [DOM - Documentation] daeTrackedElement type checking 
- 0000121: [DOM - DOM] daeElement::getDomType() for elements with the same name.
- 0000122: [DOM - DOM] Cross file links
- 0000124: [DOM - Importer] Links to non-existant files
- 0000137: [DOM - DOM] Parent element access
- 0000138: [DOM - Importer] Malformed xml causes failure: Missing "=" following attribute names 
- 0000139: [DOM - Importer] Malformed xml causes failure: Missing quotes for attribute values 
- 0000141: [DOM - DOM] assert in daeChunkBuffer::initialize
- 0000143: [DOM - Documentation] Example queryAsset code 
- 0000162: [DOM - DOM] Desk check: Inappropriate deallocation, scalar delete for vector new <cmdLineData>
- 0000167: [DOM - DOM] queryAssetCount crash if called when no file was loaded
- 0000168: [DOM - General] Renaming COL_ in DAE_ ? 
- 0000186: [DOM - DOM] Code generator had wrong types for singleton typed contents...


* Fixed in Beta04 Release

  Mantis Resolved Issues  

- No reported issues resolved.


* Fixed in Beta03 Release

  Mantis Resolved Issues  

  Re-release of Beta02 with missing files restored.

- 0000105: [DOM - DOM] Float arrays bound against "floatArray"
- 0000116: [DOM - DOM] Node transform order
- 0000119: [DOM - Documentation] Mantis link incorrect


* Fixed in Beta02 Release

  Mantis Resolved Issues  

  Note: this package was missing files and withdrawn.

- 0000101: [DOM - Integration] intGeometry::fromCOLLADA() fails to convert more than one <polygon> element.
- 0000103: [DOM - Importer] Unknown elements crash the parser
- 0000102: [DOM - Importer] Standard XML comments crash the parser
- 0000104: [DOM - Importer] Empty attribuutes hang the parser.
  

* Fixed in Beta01 Release

  Mantis Resolved Issues  
  
- 0000106: [DOM - Importer] Default values for parameters ignored
- 0000117: [DOM - Importer] xs:anyURI Handling

* Fixed in Alpha02 Release

  Mantis Resolved Issues  

- 0000055: [DOM - DOM] Crash in viewer


* Fixed in Alpha01 Release

- No issues reported.


======================================================================
[ Notes about this document go here ]
